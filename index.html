<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Tag Archive</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #111;
      color: #fff;
      padding: 2rem;
    }
    a {
      text-decoration: none;
      font-weight: bold;
      transition: color 0.2s ease-in-out;
    }
    .color-block {
      margin-bottom: 1rem;
    }
    .color-preview {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border-radius: 50%;
      margin-right: 0.5rem;
      vertical-align: middle;
    }
  </style>
</head>
<body>
  <h1>Color Tag Archive</h1>
  <div id="tag-archive"></div>

  <script>
    const palette = [
      { h: 10, name: "orangish-red" },     // orangish-reds
      { h: 35, name: "orange-gold" },      // orange-golds
      { h: 220, name: "blue" },            // blues
      { h: 140, name: "green" },           // greens
      { h: 330, name: "amaranth" }         // amaranths
    ];

    function hslToHex(h, s, l) {
      h /= 360;
      s /= 100;
      l /= 100;
      let r, g, b;

      if (s === 0) {
        r = g = b = l;
      } else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1 / 6) return p + (q - p) * 6 * t;
          if (t < 1 / 2) return q;
          if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
          return p;
        };

        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;

        r = hue2rgb(p, q, h + 1 / 3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1 / 3);
      }

      const toHex = x => {
        const hex = Math.round(x * 255).toString(16);
        return hex.length === 1 ? "0" + hex : hex;
      };

      return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
    }

    function generateCuratedPalette() {
      const colors = [];
      for (let base of palette) {
        for (let i = 0; i < 3; i++) {
          const l = 40 + i * 5; // 40%, 45%, 50%
          const s = 85;         // keep saturation rich
          const h = base.h + (Math.random() * 6 - 3); // jitter ±3°
          colors.push(hslToHex(h, s, l));
        }
      }
      return colors;
    }

    function getContrastYIQ(hexcolor) {
      hexcolor = hexcolor.replace("#", "");
      const r = parseInt(hexcolor.substr(0, 2), 16);
      const g = parseInt(hexcolor.substr(2, 2), 16);
      const b = parseInt(hexcolor.substr(4, 2), 16);
      const yiq = (r * 299 + g * 587 + b * 114) / 1000;
      return yiq >= 128 ? '#000000' : '#ffffff';
    }

    const tags = [
      "future", "land", "power", "forest", "stone", "myth", "design", "memory", "ritual", "water", "shelter", "craft", "city", "light", "poetics"
    ];

    const colors = generateCuratedPalette();
    const archive = document.getElementById("tag-archive");

    tags.forEach((tag, i) => {
      const color = colors[i % colors.length];
      const textColor = getContrastYIQ(color);
      const link = document.createElement("a");
      link.href = `#${tag}`;
      link.textContent = tag;
      link.style.color = color;

      const preview = document.createElement("span");
      preview.className = "color-preview";
      preview.style.backgroundColor = color;

      const block = document.createElement("div");
      block.className = "color-block";
      block.appendChild(preview);
      block.appendChild(link);

      archive.appendChild(block);
    });
  </script>
</body>
</html>
